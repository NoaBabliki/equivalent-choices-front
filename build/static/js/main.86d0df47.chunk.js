(this["webpackJsonpmy-app2"]=this["webpackJsonpmy-app2"]||[]).push([[0],{31:function(t,e,n){},56:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),i=n(24),r=n.n(i),o=(n(31),n(25)),c=n(7),l=n.n(c),u=n(10),h=n(2),d=n(3),p=n(5),g=n(4),b=(n(9),n(14)),_=n.n(b),j="https://equivalent-choices.herokuapp.com/",f=function(){return{getProperties:function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.get(j,{params:{client_categories:e}});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},x=n(0),m="title-1",v=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).showPage=function(t,e,n){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{className:n,children:t}),Object(x.jsx)("h2",{className:"instructions",children:e}),Object(x.jsx)("h2",{className:"continue",children:"Press the 'next' button to continue"}),s.nextButton()]})},s.nextButton=function(){return Object(x.jsx)("button",{className:"next-button",onClick:function(){s.nextButtonAction()},children:"next"})},s.nextButtonAction=function(){s.setState({page:s.state.page+1}),3===s.state.page&&s.props.setFlow()},s.state={page:1},s}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:3===this.props.flow&&1===this.state.page?this.setState({page:this.state.page+1}):1===this.state.page?this.showPage(this.props.first_title,"",m):2===this.state.page?this.showPage(this.props.second_title,"",m):3===this.state.page?this.showPage("Instructions",this.props.instructions,"title-2"):null})}}]),n}(a.a.PureComponent),O="Concert ticket",y="Workshop",w=1e3,k=n(6),S=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;Object(h.a)(this,n),(s=e.call(this,t)).showOption=function(t,e){return Object(x.jsx)("td",{children:s.remove_button(t)},e)},s.nextButtonAction=function(){s.props.setCategories(s.state.category_arr),s.props.setFlow()},s.showUndoButton=function(){return Object(x.jsxs)("h3",{className:"instructions",children:["Press ",s.undo_button()," to undo"]})};var a=s.props.categories[s.props.index].sort((function(){return Math.random()-.5})),i=a.slice(a.length-4),r=a.filter((function(t){return!i.includes(t)}));return s.state={category:s.props.setCategory(),category_arr:i,category_to_add:r,category_catche:[]},s}return Object(d.a)(n,[{key:"setCategoryArray",value:function(t){var e=this.state.category_arr.findIndex((function(e){return e===t})),n=this.state.category_arr.slice(0);n[e]=this.state.category_to_add[0],this.setState({category_arr:n,category_catche:this.state.category_catche.concat([[t,e]]),category_to_add:this.state.category_to_add.slice(1)})}},{key:"undo",value:function(){var t=this.state.category_catche.pop(),e=this.state.category_arr.slice(0),n=e[t[1]];e[t[1]]=t[0],this.setState({category_arr:e,category_to_add:[n].concat(this.state.category_to_add)})}},{key:"undo_button",value:function(){var t=this,e=!1;return 0===this.state.category_catche.length&&(e=!0),Object(x.jsx)("button",{onClick:function(){t.undo()},disabled:e,children:"Undo"})}},{key:"removeButtonAction",value:function(t){this.state.category_to_add.length>0&&this.setCategoryArray(t)}},{key:"remove_button",value:function(t){var e=this;return Object(x.jsx)("button",{className:"table-button",onClick:function(){e.removeButtonAction(t)},children:t.name})}},{key:"noMoreAlternativesMsg",value:function(){if(!this.state.category_to_add.length)return Object(x.jsx)("h4",{className:"warning",children:"No more alternatives to choose from."})}},{key:"createTable",value:function(){for(var t=this,e=[],n=this.state.category_arr.slice(0);n.length;)e.push(n.splice(0,4));return Object(x.jsxs)("div",{children:[Object(x.jsx)("table",{className:"table-border",children:Object(x.jsx)("tbody",{children:e.map((function(e,n){return Object(x.jsx)("tr",{children:e.map((function(e,n){return t.showOption(e,n)}))},n)}))})}),Object(x.jsx)("div",{children:this.noMoreAlternativesMsg()})]})}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"instructions",children:"These are the options for"}),Object(x.jsx)("h3",{className:"category-name",children:this.state.category}),Object(x.jsx)("h3",{className:"instructions",children:"you will be asked to rate:"}),this.props.categories?this.createTable():null,Object(x.jsx)("h3",{className:"instructions",children:"Please click on any option you don\u2019t understand or have no preference for to replace it with a different one."}),this.showUndoButton(),Object(x.jsx)("h3",{className:"continue",children:"After replacing options, press the next button to continue."}),Object(x.jsx)("button",{className:"next-button",onClick:function(){t.nextButtonAction()},children:"next"})]})}}]),n}(a.a.PureComponent),C=n(15),N=n(26),I=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={current_rating:s.defaultRating()},s}return Object(d.a)(n,[{key:"defaultRating",value:function(){return this.props.default_rating}},{key:"sliderChange",value:function(t){this.state.current_rating!==t&&(this.setState({current_rating:t}),this.props.index?this.props.getValue(t,this.props.index):this.props.getValue(t))}},{key:"render",value:function(){var t=this;return Object(x.jsx)("div",{children:Object(x.jsx)(N.a,{className:"horizontal-slider",thumbClassName:"example-thumb",trackClassName:"example-track",disabled:this.props.disabled,min:1,max:w,valueLabelDisplay:"on",defaultValue:this.defaultRating(),renderThumb:function(e,n){return Object(x.jsx)("div",Object(C.a)(Object(C.a)({},e),{},{onChange:t.sliderChange(n.valueNow),children:n.valueNow}))}})})}}]),n}(a.a.Component),A=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={category_name:s.props.setCategory(),current_option_index:0,options_added:[],disable_next_button:!0,current_option_name:"",current_option_rating:s.setRatingToMiddle(),disable_option_adding:!1},s.handleChange=s.handleChange.bind(Object(k.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(k.a)(s)),s.sliderChange=s.sliderChange.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){localStorage.getItem("option_index")&&this.state.flow!==parseInt(String(localStorage.getItem("option_index")),10)&&this.setState({current_option_index:parseInt(String(localStorage.getItem("option_index")),10)})}},{key:"main",value:function(){return Object(x.jsxs)("div",{children:[this.showInstructions(),this.addOption()]})}},{key:"setRatingToMiddle",value:function(){return Math.round(500.5)}},{key:"desplayIndex",value:function(){return 1===this.state.current_option_index?this.state.current_option_index:this.state.current_option_index+1}},{key:"showInstructions",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"instructions",children:"In addition to the previous options, you can add"}),Object(x.jsx)("h3",{className:"category-name",children:1}),Object(x.jsx)("h3",{className:"instructions",children:"more options of your own to category"}),Object(x.jsxs)("h3",{className:"category-name",children:[this.state.category_name,"."]}),Object(x.jsxs)("h3",{className:"instructions",children:["Please add options that are close to the edges of the preference scale - very highly preferred (close to",w,") or very lowly preferred (close to",1,")."]}),Object(x.jsxs)("h3",{className:"instructions",children:[" ","Please add an option and rate it (option"]}),Object(x.jsx)("h3",{className:"category-name",children:this.desplayIndex()}),Object(x.jsx)("h3",{className:"instructions",children:"out of"}),Object(x.jsx)("h3",{className:"category-name",children:1}),Object(x.jsx)("h3",{className:"instructions",children:")."})]})}},{key:"handleChange",value:function(t){this.setState({current_option_name:t.target.value})}},{key:"handleSubmit",value:function(t){localStorage.setItem("option_index",this.state.current_option_index+1);var e={id:this.props.maxId+this.state.current_option_index,name:this.state.current_option_name,rating:this.state.current_option_rating};this.state.options_added.push(e),this.setState({current_option_index:this.state.current_option_index+1,current_option_name:"",current_option_rating:this.setRatingToMiddle()}),this.state.current_option_index+1===1&&(this.props.addParticipentOptions(this.state.options_added),this.setState({disable_option_adding:!0}))}},{key:"sliderChange",value:function(t){t!==this.state.current_option_rating&&this.setState({current_option_rating:t})}},{key:"disableSubmit",value:function(){var t=w-this.state.current_option_rating<200;return!(1+this.state.current_option_rating<200)&&!t||!this.state.current_option_name}},{key:"addOption",value:function(){var t=this.disableSubmit();return Object(x.jsxs)("div",{children:[Object(x.jsxs)("label",{className:"instructions",children:["Option Name:",Object(x.jsx)("input",{className:"instructions",type:"text",disabled:this.state.disable_option_adding,value:this.state.current_option_name,onChange:this.handleChange})]}),Object(x.jsx)("div",{children:this.optionSlider()}),Object(x.jsx)("input",{className:"submit-button",type:"submit",value:"submit",disabled:t,onClick:this.handleSubmit})]})}},{key:"optionSlider",value:function(){return Object(x.jsx)(I,{disabled:this.state.disable_option_adding,default_rating:Math.round(500.5),getValue:this.sliderChange},this.state.current_option_index)}},{key:"disableNextButton",value:function(){this.setState({disable_next_button:!1})}},{key:"nextButtonAction",value:function(){localStorage.removeItem("option_index"),this.props.setFlow()}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{children:[this.main(),1!==this.state.current_option_index?null:this.disableNextButton(),Object(x.jsx)("button",{className:"next-button",disabled:this.state.disable_next_button,onClick:function(){t.nextButtonAction()},children:"next"})]})}}]),n}(a.a.PureComponent),F=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={cur_option:s.props.option,cur_rating:0},s.sliderChange=s.sliderChange.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"sliderChange",value:function(t){this.state.cur_rating!==t&&(this.setState({cur_rating:t}),this.props.ratingChange(t))}},{key:"rateOption",value:function(){return Object(x.jsx)(I,{disabled:!1,default_rating:Math.round(500.5),getValue:this.sliderChange})}},{key:"render",value:function(){return Object(x.jsx)("div",{children:this.state.cur_option?this.rateOption():null})}}]),n}(a.a.Component),P=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={disable_next_button:!0,cur_rating:0},s.ratingChange=s.ratingChange.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"main",value:function(){return Object(x.jsxs)("div",{children:[this.instructions(),Object(x.jsx)(F,{option:this.props.option,ratingChange:this.ratingChange},this.props.option.id)]})}},{key:"ratingChange",value:function(t){this.setState({disable_next_button:!1,cur_rating:t})}},{key:"instructions",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"instructions",children:"What is your preference for"}),Object(x.jsx)("h3",{className:"category-name",children:this.props.option.name}),Object(x.jsx)("h3",{className:"instructions",children:"?"})]})}},{key:"nextButtonAction",value:function(){var t=this.props.option;t.rating=this.state.cur_rating,this.props.next_option(t)}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{children:[this.props.option?this.main():null,Object(x.jsx)("button",{className:"next-button",disabled:this.state.disable_next_button,onClick:function(){t.nextButtonAction()},children:"next"})]})}}]),n}(a.a.Component),M=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;Object(h.a)(this,n);var a=(s=e.call(this,t)).props.categories[s.props.index].sort((function(){return Math.random()-.5})),i=a.filter((function(t){return t.id<s.props.max_id})),r=a.filter((function(t){return t.id>=s.props.max_id}));return s.state={category_items:i,rest_of_data:r,cur_option_index:0},s.nextOption=s.nextOption.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"nextOption",value:function(t){var e=this.state.category_items.slice(0);e[this.state.cur_option_index]=t;var n=e.concat(this.state.rest_of_data);this.props.setCategories(n),this.state.cur_option_index+1<this.state.category_items.length?this.setState({category_items:e,cur_option_index:this.state.cur_option_index+1}):this.props.setFlow()}},{key:"render",value:function(){return Object(x.jsx)("div",{children:this.state.category_items?Object(x.jsx)(P,{option:this.state.category_items[this.state.cur_option_index],next_option:this.nextOption},this.state.cur_option_index):console.log("no categories")})}}]),n}(a.a.Component),D=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={ratings:s.createRatingArray()},s.sliderChange=s.sliderChange.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"createRatingArray",value:function(){for(var t=this.props.client_categories[this.props.index],e=t.length,n=new Array(e+1).fill(0),s=1;s<e+1;s++)n[s]=t[s-1].rating;return n}},{key:"sliderChange",value:function(t,e){if(t!==this.state.ratings[e]){var n=this.state.ratings.slice(0);n[e]=t,this.setState({ratings:n})}}},{key:"showAllOptions",value:function(){for(var t=this,e=[],n=this.props.client_categories[this.props.index].slice(0);n.length;)e.push(n.splice(0,2));return Object(x.jsx)("div",{children:Object(x.jsx)("table",{className:"table-no-border",children:Object(x.jsx)("tbody",{children:e.map((function(e,n){return Object(x.jsx)("tr",{className:"table-no-border",children:e.map((function(e,s){return t.showOption(e,s+1+2*n)}))},n)}))})})})}},{key:"showOption",value:function(t,e){return Object(x.jsxs)("td",{className:"table-no-border",children:[Object(x.jsxs)("h4",{className:"option-name",children:[t.name,":"]}),t?Object(x.jsx)(I,{index:e,disabled:!1,default_rating:t.rating,getValue:this.sliderChange},t.id):null]})}},{key:"nextButtonAction",value:function(){for(var t=this.props.client_categories[this.props.index],e=t.length,n=t.slice(0),s=0;s<e;s++)n[s].rating=this.state.ratings[s+1];this.props.setCategories(n),this.props.setFlow()}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"instructions",children:"These are your preferences for the options presented. You may adjust them now to your liking."}),this.props.categories?this.showAllOptions():null,Object(x.jsx)("button",{className:"next-button",onClick:function(){t.nextButtonAction()},children:"next"})]})}}]),n}(a.a.Component),T=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).setCategory=function(){return["Concert tickets","Workshops"][s.state.category_index]},s.state={flow:1,category_index:0},s.setFlow=s.setFlow.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem("second_stage_flow")&&this.state.flow!==parseInt(String(localStorage.getItem("second_stage_flow")),10)&&this.setState({flow:parseInt(String(localStorage.getItem("second_stage_flow")),10)}),localStorage.getItem("category_index")&&this.state.category_index!==parseInt(String(localStorage.getItem("category_index")),10)&&this.setState({category_index:parseInt(String(localStorage.getItem("category_index")),10)})}},{key:"componentDidUpdate",value:function(){localStorage.getItem("second_stage_flow")&&this.state.flow!==parseInt(String(localStorage.getItem("second_stage_flow")),10)&&this.setState({flow:parseInt(String(localStorage.getItem("second_stage_flow")),10)}),localStorage.getItem("category_index")&&this.state.category_index!==parseInt(String(localStorage.getItem("category_index")),10)&&this.setState({category_index:parseInt(String(localStorage.getItem("category_index")),10)})}},{key:"setFlow",value:function(){localStorage.setItem("second_stage_flow",this.state.flow+1),this.setState({flow:this.state.flow+1})}},{key:"setCategoryIndex",value:function(){localStorage.removeItem("second_stage_flow"),this.state.category_index+1<this.props.categories.length?(localStorage.setItem("category_index",this.state.category_index+1),this.setState({category_index:this.state.category_index+1,flow:1}),this.props.setCategoryIndex()):(localStorage.removeItem("category_index"),this.props.setFlow())}},{key:"render",value:function(){var t=this.state.flow;return Object(x.jsxs)("main",{children:[Object(x.jsx)("div",{children:this.props.categories&&1===t?Object(x.jsx)(S,{categories:this.props.categories,index:this.state.category_index,setCategories:this.props.setCategories,setCategory:this.setCategory,setFlow:this.setFlow},this.state.category_index):null}),Object(x.jsx)("div",{children:2===t?Object(x.jsx)(A,{index:this.state.category_index,setCategory:this.setCategory,addParticipentOptions:this.props.addParticipentOptions,numCategories:this.props.categories.length,maxId:this.props.max_id,setFlow:this.setFlow},this.state.category_index):null}),Object(x.jsx)("div",{children:3===t&&this.props.categories?Object(x.jsx)(M,{index:this.state.category_index,max_id:this.props.max_id,categories:this.props.categories,setCategories:this.props.setCategories,setFlow:this.setFlow},this.state.category_index):null}),Object(x.jsx)("div",{children:4===t&&this.props.categories?Object(x.jsx)(D,{index:this.state.category_index,categories:this.props.categories,setCategories:this.props.setCategories,client_categories:this.props.client_categories,setFlow:this.setFlow},this.state.category_index):null}),Object(x.jsx)("div",{children:5===t?this.setCategoryIndex():null})]})}}]),n}(a.a.Component),B=(n(55),n(11)),R=function(t){var e=t.category.sort((function(){return Math.random()-.5})),n={id:-1,name:t.default_msg},a=Object(s.useState)(n),i=Object(B.a)(a,2),r=i[0],o=i[1],c=Object(s.useState)(!1),l=Object(B.a)(c,2),u=l[0],h=l[1],d=Object(s.useState)(""),p=Object(B.a)(d,2),g=p[0],b=p[1];var _=function(e,n){return Object(x.jsx)("td",{children:(s=e,Object(x.jsx)("button",{className:"table-button",onClick:function(){!function(e){r!==e&&(o(e),t.handleSubmit(e),h(!1))}(s)},children:s.name}))},n);var s};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("label",{className:"option-attr",children:[t.title,":"]}),Object(x.jsx)("button",{className:"radio-option",disabled:t.disable,onClick:function(){h(!u)},children:r.name}),u?function(){for(var n=[],s=e.slice(0);s.length;)n.push(s.splice(0,4));return 2===t.index&&"margin-op2"!==g?b("margin-op2"):1===t.index&&"margin-op1"!==g&&b("margin-op1"),Object(x.jsx)("div",{className:"option-box",children:Object(x.jsx)("table",{className:"table-border "+g,children:Object(x.jsx)("tbody",{children:n.map((function(t,e){return Object(x.jsx)("tr",{children:t.map((function(t,e){return _(t,e)}))},e)}))})})})}():null]})},q=function(t){var e=function(e,n){return Object(x.jsx)(R,{category:t.categories[n],index:t.index,title:e,default_msg:t.default_msg,disable:t.disable,handleSubmit:t.handleSubmit})},n=function(t,e){return Object(x.jsxs)("label",{className:"option-attr",children:[e,": ",t.name]})};return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"box",children:[Object(x.jsxs)("label",{className:"option-title",children:["Option ",t.index]}),t.attr1?n(t.attr1,O):e(O,0),t.attr2?n(t.attr2,y):e(y,1)]})})},U=function(t){var e=Object(s.useState)(0),n=Object(B.a)(e,2),a=n[0],i=n[1],r=Object(s.useState)(!0),o=Object(B.a)(r,2),c=o[0],l=o[1],u=function(t){i(t),l(!1)};return Object(x.jsxs)("div",{className:"dialog-box",children:[Object(x.jsx)("label",{className:"option-title",children:"Are the options equivalent now?"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"radio",checked:1===a,className:"radio-option",onChange:function(){u(1)}}),Object(x.jsxs)("label",{className:"radio-title",children:[" ","Yes, they are approximately the same"," "]}),Object(x.jsx)("div",{className:"under"}),Object(x.jsx)("input",{type:"radio",checked:2===a,className:"radio-option",onChange:function(){u(2)}}),Object(x.jsxs)("label",{className:"radio-title",children:[" ","I still highly prefer option 1"," "]}),Object(x.jsx)("div",{className:"under"}),Object(x.jsx)("input",{type:"radio",checked:3===a,className:"radio-option",onChange:function(){u(3)}}),Object(x.jsxs)("label",{className:"radio-title",children:[" ","I still highly prefer option 2"," "]})]}),Object(x.jsx)("button",{className:"confirm-button",disabled:c,onClick:function(){t.save_answer(a)},children:"Confirm"})]})},V="Please choose",W=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={cur_chosen:null,attr_array:s.chooseAttribues(),disable_next:!0,call_timer:!0,show_dialog_box:!1},s.handleSubmit=s.handleSubmit.bind(Object(k.a)(s)),s.setDisableNext=s.setDisableNext.bind(Object(k.a)(s)),s.saveDialogAnswer=s.saveDialogAnswer.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"chooseAttribues",value:function(){var t=Math.floor(4*Math.random()),e=new Array(4).fill(0);return this.fillArray(e,t),e}},{key:"fillOneOption",value:function(t,e,n,s,a,i,r,o){for(var c=a;c<i;c++)t[c]=this.props.cur_option[c%o];for(var l=n;l<s;l++)if(l===e)t[l]=null;else{var u=r[l%o].filter((function(e){return!t.includes(e)})),h=u[Math.floor(Math.random()*u.length)];t[l]=h}}},{key:"fillArray",value:function(t,e){var n=Math.floor(100*Math.random()),s=[this.props.categories[0].slice(0),this.props.categories[1].slice(0)],a=t.length/2;1===this.props.cur_match?this.fillAllAttributes(t,e,s,a):e<a?this.fillOneOption(t,e,0,a,a,t.length,s,a):this.fillOneOption(t,e,a,t.length,0,a,s,a),this.attentionCheck(t,e,n,a)}},{key:"fillAllAttributes",value:function(t,e,n,s){for(var a=0;a<t.length;a++)a===e?t[e]=null:function(){var e=n[a%s],i=e[Math.floor(Math.random()*e.length)];t[a]=i,n[a%s]=n[a%s].filter((function(t){return t!==i}))}()}},{key:"attentionCheck",value:function(t,e,n,s){if(n<10)for(var a=0;a<s;a++)e%s!==a&&(t[a+s]=t[a])}},{key:"showInstructions",value:function(){return Object(x.jsx)("h3",{className:"instructions",children:"Please fill in the missing value to make the options of equal value."})}},{key:"componentDidMount",value:function(){this.mountTime=(new Date).getTime()}},{key:"saveDialogAnswer",value:function(t){this.setState({show_dialog_box:!1}),this.saveAndContinue(t)}},{key:"saveAndContinue",value:function(t){var e=(new Date).getTime()-this.mountTime,n={id:this.props.index,cur_match:this.props.cur_match,cur_set:this.props.cur_set,option1:this.state.attr_array.slice(0,2),option2:this.state.attr_array.slice(2),attr_chosen:this.state.cur_chosen,reaction_time:e,is_equivalent:t};this.props.setFlow(n)}},{key:"handleSubmit",value:function(t){t.name!==V?(this.setState({cur_chosen:t}),this.setDisableNext()):this.setState({cur_chosen:null,disable_next:!0})}},{key:"setDisableNext",value:function(){(new Date).getTime()>this.mountTime+1e3?this.setState({disable_next:!1}):this.state.call_timer&&(this.setState({call_timer:!1}),setTimeout(this.setDisableNext,1e3))}},{key:"showOptions",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(q,{index:1,categories:this.props.categories_to_choose,attr1:this.state.attr_array[0],attr2:this.state.attr_array[1],disable:this.state.show_dialog_box,default_msg:V,handleSubmit:this.handleSubmit}),Object(x.jsx)(q,{index:2,categories:this.props.categories_to_choose,attr1:this.state.attr_array[2],attr2:this.state.attr_array[3],disable:this.state.show_dialog_box,default_msg:V,handleSubmit:this.handleSubmit})]})}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{className:"compare-options-body",children:[this.showInstructions(),this.props.categories?this.showOptions():null,Object(x.jsx)("button",{className:"submit-abs",disabled:this.state.disable_next,onClick:function(){t.setState({show_dialog_box:!0})},children:"Next"}),this.state.show_dialog_box?Object(x.jsx)(U,{save_answer:this.saveDialogAnswer}):null]})}}]),n}(a.a.PureComponent),L=function(t){return Object(x.jsxs)("div",{children:[localStorage.clear(),Object(x.jsx)("h3",{className:"instructions",children:"Thank you for your participation! The Hart lab thanks you."})]})},Y=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(h.a)(this,n),(s=e.call(this,t)).state={cur_set:1,cur_match:1,index:0,cur_set_array:[],choices:[],cur_option:[],cur_set_categories:s.props.categories},s.setFlow=s.setFlow.bind(Object(k.a)(s)),s}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){localStorage.getItem("cur_set")&&this.state.cur_set!==parseInt(String(localStorage.getItem("cur_set")),10)&&this.setState({cur_set:parseInt(String(localStorage.getItem("cur_set")),10)})}},{key:"getOptionForNextMatch",value:function(t,e,n){for(var s=[],a=0;a<2;a++)t[a]||((s=t)[a]=n),e[a]||((s=e)[a]=n);return s}},{key:"findItemsToRemove",value:function(t){for(var e=0;e<2;e++){if(null===t.option1[e])return t.option2;if(null===t.option2[e])return t.option1}}},{key:"setFlow",value:function(t){var e=this;if(this.setState({index:this.state.index+1}),this.state.cur_match<3){var n=this.state.cur_set_categories.map((function(n){return n.filter((function(n){return!e.findItemsToRemove(t).includes(n)}))})),s=this.state.cur_set_array.slice(0);s.push(t),this.setState({cur_match:this.state.cur_match+1,cur_option:this.getOptionForNextMatch(t.option1,t.option2,t.attr_chosen),cur_set_array:s,cur_set_categories:n})}else if(this.state.cur_set<=2){localStorage.setItem("cur_set",this.state.cur_set+1),this.getOptionForNextMatch(t.option1,t.option2,t.attr_chosen),this.state.cur_set_array.push(t);var a=this.state.choices.slice(0);a.push(this.state.cur_set_array),this.setState({cur_match:1,cur_set:this.state.cur_set+1,cur_set_array:[],choices:a,cur_set_categories:this.props.categories}),this.props.setChoices(a)}else this.props.setChoices(this.state.choices)}},{key:"render",value:function(){return Object(x.jsx)("div",{children:this.state.cur_set<=2?Object(x.jsx)(W,{index:this.state.index,cur_match:this.state.cur_match,cur_set:this.state.cur_set,categories:this.state.cur_set_categories,categories_to_choose:this.props.categories,cur_option:this.state.cur_option,setFlow:this.setFlow},this.state.index):Object(x.jsx)(L,{})})}}]),n}(a.a.PureComponent),J=f(),z={getProperties:function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.get("https://equivalent-choices.herokuapp.com/equivalent-choices",{params:{equivalent_choices:e}});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(){var t;Object(h.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={flow:1,category_index:0,max_id:1e3,client_catigories:[[],[]]},t.createOptions=function(t,e){for(var n=[],s=0;s<t.length;s++){var a={id:s+e,name:t[s],rating:0};n.push(a)}return n},t.setCategoryIndex=function(){var e=1;t.state.category_index===e&&(e=-1),t.setState({category_index:t.state.category_index+e})},t.setCategories=function(){var e=Object(u.a)(l.a.mark((function e(n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=t.state.client_catigories.slice(0))[t.state.category_index]=n,e.t0=t,e.t1=s,e.next=6,J.getProperties(s);case 6:e.t2=e.sent,e.t3={client_catigories:e.t1,categories:e.t2},e.t0.setState.call(e.t0,e.t3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.setFlow=function(){localStorage.setItem("flow",String(t.state.flow+1)),t.setState({flow:t.state.flow+1})},t.addParticipentOptions=function(){var e=Object(u.a)(l.a.mark((function e(n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=t.state.client_catigories.slice(0))[t.state.category_index]=s[t.state.category_index].concat(n),e.t0=t,e.t1=s,e.next=6,J.getProperties(s);case 6:e.t2=e.sent,e.t3={client_catigories:e.t1,categories:e.t2},e.t0.setState.call(e.t0,e.t3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.setChoices=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,z.getProperties(n);case 3:e.t1=e.sent,e.t2={choices:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(d.a)(n,[{key:"getCategories",value:function(){return this.state.client_catigories!==[[],[]]?this.state.client_catigories:this.state.categories}},{key:"componentDidMount",value:function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,J.getProperties(this.state.client_catigories);case 3:t.t1=t.sent,t.t2={categories:t.t1},t.t0.setState.call(t.t0,t.t2),1===this.state.flow&&this.setState({max_id:this.setMaxCategoryId()});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){localStorage.getItem("flow")&&this.state.flow!==parseInt(String(localStorage.getItem("flow")),10)&&this.setState({flow:parseInt(String(localStorage.getItem("flow")),10)})}},{key:"setMaxCategoryId",value:function(){var t=4;if(this.state.categories){var e,n=Object(o.a)(this.state.categories);try{for(n.s();!(e=n.n()).done;){var s=e.value.length;s>t&&(t=s)}}catch(a){n.e(a)}finally{n.f()}}return t}},{key:"render",value:function(){var t="What do you prefer?",e="In this task, we ask you to rate your preferences in a given category. You will see different options in a given category. Please rate them one by one on a scale of 1-1000.";return 3===this.state.flow&&(t="Make the two options equal",e="In this task, we ask you to compare between two options, each including a Concert ticket and a Workshop. At each screen, you will see two options and their attributes, with one attribute value missing. Please type in an attribute value that will make the two options equally preferred, from the pools of the first task."),Object(x.jsxs)("main",{children:[Object(x.jsx)("div",{children:1===this.state.flow||3===this.state.flow?Object(x.jsx)(v,{first_title:"Welcome",second_title:t,instructions:e,flow:this.state.flow,setFlow:this.setFlow}):null}),Object(x.jsx)("div",{children:2===this.state.flow&&this.state.categories?Object(x.jsx)(T,{categories:this.state.categories,client_categories:this.state.client_catigories,max_id:this.state.max_id,setCategories:this.setCategories,addParticipentOptions:this.addParticipentOptions,setCategoryIndex:this.setCategoryIndex,setFlow:this.setFlow}):null}),Object(x.jsx)("div",{children:4===this.state.flow?Object(x.jsx)(Y,{categories:this.state.categories,setChoices:this.setChoices}):null})]})}}]),n}(a.a.PureComponent),H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),s(t),a(t),i(t),r(t)}))};r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(E,{})}),document.getElementById("root")),H()},9:function(t,e,n){}},[[56,1,2]]]);
//# sourceMappingURL=main.86d0df47.chunk.js.map